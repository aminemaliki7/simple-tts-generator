<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple TTS Generator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <style>
        body {
            padding-top: 2rem;
            padding-bottom: 2rem;
        }
        .form-container {
            max-width: 700px;
            margin: 0 auto;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            background-color: #fff;
        }
        .header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .footer {
            text-align: center;
            margin-top: 3rem;
            color: #6c757d;
        }
        .tab-content {
            padding-top: 1.5rem;
        }
        .text-area {
            min-height: 200px;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container">
        <div class="form-container">
            <div class="header">
                <h1>Simple TTS Generator</h1>
                <p class="lead">Convert your text to speech with multiple language options</p>
            </div>
            
            <form action="/upload" method="POST" enctype="multipart/form-data">
                <!-- Add tabs for input methods -->
                <ul class="nav nav-tabs" id="inputTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="text-tab" data-bs-toggle="tab" data-bs-target="#text-input" type="button" role="tab" aria-controls="text-input" aria-selected="true">Write Text</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="file-tab" data-bs-toggle="tab" data-bs-target="#file-input" type="button" role="tab" aria-controls="file-input" aria-selected="false">Upload File</button>
                    </li>
                </ul>
                
                <div class="tab-content" id="inputTabsContent">
                    <!-- Text input tab -->
                    <div class="tab-pane fade show active" id="text-input" role="tabpanel" aria-labelledby="text-tab">
                        <div class="mb-3">
                            <label for="text-content" class="form-label">Enter your text</label>
                            <textarea class="form-control text-area" id="text-content" name="text-content" rows="8" placeholder="Type or paste your text here..."></textarea>
                        </div>
                    </div>
                    
                    <!-- File upload tab -->
                    <div class="tab-pane fade" id="file-input" role="tabpanel" aria-labelledby="file-tab">
                        <div class="mb-3">
                            <label for="script" class="form-label">Upload your script file (.txt)</label>
                            <input type="file" class="form-control" id="script" name="script" accept=".txt">
                        </div>
                    </div>
                </div>
                
                <!-- Hidden input to track which tab is active -->
                <input type="hidden" id="input-method" name="input-method" value="text">
                
                <div class="mb-3">
                    <label for="language" class="form-label">Language</label>
                    <select class="form-select" id="language" onchange="updateVoices()">
                        {% for language in languages %}
                        <option value="{{ language }}">{{ language }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="mb-3">
                    <label for="voice" class="form-label">Voice</label>
                    <select class="form-select" id="voice" name="voice">
                        {% for voice in voices %}
                        <option value="{{ voice.id }}" data-language="{{ voice.language }}">{{ voice.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="mb-3">
                    <label for="speed" class="form-label">Speed: <span id="speedValue">1.0</span></label>
                    <input type="range" class="form-range" id="speed" name="speed" min="0.5" max="2" step="0.1" value="1.0" oninput="updateSpeedValue()">
                    <div class="small text-muted">
                        <span class="float-start">Slower</span>
                        <span class="float-end">Faster</span>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="depth" class="form-label">Voice Depth: <span id="depthValue">1</span></label>
                    <input type="range" class="form-range" id="depth" name="depth" min="1" max="5" step="1" value="1" oninput="updateDepthValue()">
                    <div class="small text-muted">
                        <span class="float-start">Normal</span>
                        <span class="float-end">Deeper</span>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary">Generate TTS</button>
                </div>
            </form>
            
            <div class="mt-4">
                <a href="/dashboard" class="btn btn-outline-secondary btn-sm">View My Jobs</a>
            </div>
            
            <div class="footer">
                <p>Convert text to speech with customizable voice options.</p>
            </div>
        </div>
    </div>
    
    <script>
        function updateSpeedValue() {
            const speedSlider = document.getElementById("speed");
            const speedValue = document.getElementById("speedValue");
            speedValue.textContent = speedSlider.value;
        }
        
        function updateDepthValue() {
            const depthSlider = document.getElementById("depth");
            const depthValue = document.getElementById("depthValue");
            depthValue.textContent = depthSlider.value;
        }
        
        function updateVoices() {
            const languageSelect = document.getElementById("language");
            const voiceSelect = document.getElementById("voice");
            const selectedLanguage = languageSelect.value;
            
            // Hide all options first
            for (let i = 0; i < voiceSelect.options.length; i++) {
                const option = voiceSelect.options[i];
                const voiceLanguage = option.getAttribute("data-language");
                
                if (voiceLanguage === selectedLanguage) {
                    option.style.display = "";
                } else {
                    option.style.display = "none";
                }
            }
            
            // Select the first visible option
            for (let i = 0; i < voiceSelect.options.length; i++) {
                const option = voiceSelect.options[i];
                if (option.style.display !== "none") {
                    voiceSelect.selectedIndex = i;
                    break;
                }
            }
        }
        
        // Initialize on page load
        document.addEventListener("DOMContentLoaded", function() {
            updateVoices();
            
            // Set up tab change handlers
            const textTab = document.getElementById('text-tab');
            const fileTab = document.getElementById('file-tab');
            const inputMethod = document.getElementById('input-method');
            
            textTab.addEventListener('shown.bs.tab', function (e) {
                inputMethod.value = 'text';
            });
            
            fileTab.addEventListener('shown.bs.tab', function (e) {
                inputMethod.value = 'file';
            });
        });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>